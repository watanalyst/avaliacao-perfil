import{u as F,m as R,p as D,c as L,w as g,a,b as o,h as T,d as l,e as j,o as i,g as m,k as h,F as A,r as O,t as U,l as I,f as $,q as f,j as q}from"./app-BFVYraDF.js";import{_ as P}from"./GuestLayout-DXuC4kWn.js";import{_ as p,a as v,b as w}from"./TextInput-C5av4InS.js";import{P as z}from"./PrimaryButton-FV82ErwS.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={key:0,class:"mt-1 text-sm text-gray-500"},G={key:1,class:"absolute z-10 mt-2 w-full overflow-hidden rounded-md border bg-white shadow-lg"},H=["onClick"],K={class:"font-semibold"},Q={class:"text-gray-600"},W={key:2,class:"mt-2 text-sm text-gray-500"},X={class:"mt-4"},Y={class:"mt-4"},Z={class:"mt-4"},ee={class:"mt-4 flex items-center justify-end"},re={__name:"Register",setup(se){const e=F({name:"",numcad:"",email:"",password:"",password_confirmation:""}),B=()=>{e.post(route("register"),{onFinish:()=>e.reset("password","password_confirmation")})},u=f(""),_=f(null),d=f([]),c=f(!1);let y=null;const k=q(()=>!e.numcad||!e.name?"":`${e.numcad} - ${e.name}`),E=q(()=>{const n=u.value.trim();return e.numcad&&e.name?!1:!c.value&&n.length>=2&&d.value.length===0});function b(n){_.value&&!_.value.contains(n.target)&&r()}function x(n){n.key==="Escape"&&r()}R(()=>{document.addEventListener("click",b),document.addEventListener("keydown",x)}),D(()=>{document.removeEventListener("click",b),document.removeEventListener("keydown",x)});function r(){d.value=[]}function V(){e.numcad="",e.name=""}function S(n){const t=n.NUMCAD??n.numcad??"",s=(n.NOMFUN??n.nomfun??"").toString().toUpperCase();e.numcad=t,e.name=s,u.value=`${t} - ${s}`,r()}function M(){clearTimeout(y);const t=(u.value||"").toUpperCase(),s=t.trim();if(u.value=t,!s){V(),r();return}if(k.value&&s!==k.value&&V(),s.length<2&&!/^\d+$/.test(s)){r();return}y=setTimeout(async()=>{c.value=!0;try{const C=route("colaboradores.index")+`?q=${encodeURIComponent(s)}`,N=await fetch(C,{headers:{Accept:"application/json"}});if(!N.ok){r();return}d.value=await N.json()}finally{c.value=!1}},250)}return(n,t)=>(i(),L(P,null,{default:g(()=>[a(o(T),{title:"Registrar"}),l("form",{onSubmit:j(B,["prevent"])},[l("div",null,[a(p,{for:"search",value:"Colaborador (Senior)"}),l("div",{ref_key:"wrapper",ref:_,class:"relative"},[a(v,{id:"search",type:"text",class:"mt-1 block w-full uppercase",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),onInput:M,onBlur:t[1]||(t[1]=()=>n.setTimeout(r,150)),placeholder:"Digite matrícula ou nome...",autocomplete:"off",spellcheck:"false",required:""},null,8,["modelValue"]),c.value?(i(),m("div",J," Buscando... ")):h("",!0),d.value.length?(i(),m("div",G,[(i(!0),m(A,null,O(d.value,s=>(i(),m("button",{key:s.NUMCAD??s.numcad,type:"button",class:"block w-full px-3 py-2 text-left text-sm hover:bg-gray-50",onClick:C=>S(s)},[l("span",K,U(s.NUMCAD??s.numcad),1),l("span",Q," - "+U(s.NOMFUN??s.nomfun),1)],8,H))),128))])):h("",!0),E.value?(i(),m("div",W," Nenhum colaborador encontrado. ")):h("",!0)],512),a(w,{class:"mt-2",message:o(e).errors.name},null,8,["message"])]),l("div",X,[a(p,{for:"email",value:"E-mail"}),a(v,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:o(e).email,"onUpdate:modelValue":t[2]||(t[2]=s=>o(e).email=s),required:"",autocomplete:"username"},null,8,["modelValue"]),a(w,{class:"mt-2",message:o(e).errors.email},null,8,["message"])]),l("div",Y,[a(p,{for:"password",value:"Senha"}),a(v,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:o(e).password,"onUpdate:modelValue":t[3]||(t[3]=s=>o(e).password=s),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(w,{class:"mt-2",message:o(e).errors.password},null,8,["message"])]),l("div",Z,[a(p,{for:"password_confirmation",value:"Confirmar senha"}),a(v,{id:"password_confirmation",type:"password",class:"mt-1 block w-full",modelValue:o(e).password_confirmation,"onUpdate:modelValue":t[4]||(t[4]=s=>o(e).password_confirmation=s),required:"",autocomplete:"new-password"},null,8,["modelValue"]),a(w,{class:"mt-2",message:o(e).errors.password_confirmation},null,8,["message"])]),l("div",ee,[a(o(I),{href:n.route("login"),class:"rounded-md text-sm text-gray-600 underline hover:text-gray-900"},{default:g(()=>[...t[5]||(t[5]=[$(" Já possui cadastro? ",-1)])]),_:1},8,["href"]),a(z,{class:"ms-4",disabled:o(e).processing||!o(e).name||!o(e).numcad},{default:g(()=>[...t[6]||(t[6]=[$(" Registrar ",-1)])]),_:1},8,["disabled"])])],32)]),_:1}))}};export{re as default};
