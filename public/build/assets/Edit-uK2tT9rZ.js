import{u as Z,q as M,g as u,a as L,b as l,h as J,w as P,d as o,t as p,l as K,f as U,e as Q,o as c,F as b,r as x,n as R,i as v,y as C,k as g,z as k,A as W,j as Y}from"./app-PiHMUUL0.js";import{_ as ee}from"./AuthenticatedLayout-BVhdYX6q.js";const oe={class:"py-8"},te={class:"mx-auto max-w-5xl sm:px-6 lg:px-8"},ae={class:"overflow-hidden rounded-2xl bg-white shadow-lg ring-1 ring-gray-900/5"},le={class:"p-6"},re={class:"mb-6 flex items-center justify-between"},ne={class:"text-xl font-bold text-gray-900"},ie={class:"mt-1 text-sm text-gray-500"},se={class:"flex items-center gap-3"},de={class:"border-b border-gray-200"},ue={class:"-mb-px flex flex-wrap gap-1"},ce=["onClick"],me={class:"space-y-5"},pe={class:"relative mt-1"},fe={key:0,class:"mt-1 text-sm text-gray-500"},ve={key:1,class:"absolute z-10 mt-1 w-full overflow-hidden rounded-lg border bg-white shadow-lg"},ge=["onClick"],be={class:"font-semibold text-gray-900"},xe={class:"text-gray-600"},_e={key:0,class:"mt-1 text-sm text-red-600"},ye={key:1,class:"mt-1 text-sm text-red-600"},Ie={key:2,class:"mt-2 inline-flex items-center gap-1.5 rounded-full bg-brand-50 px-3 py-1 text-xs font-medium text-brand-700"},Ae={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Ne={key:0,class:"mt-1 text-sm text-red-600"},he={key:0,class:"mt-1 text-sm text-red-600"},De={class:"space-y-4"},Ce={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},ke={class:"block text-sm font-medium text-gray-700"},Ee=["value","onInput","onBlur"],Oe={key:0,class:"mt-1 text-sm text-red-600"},we={class:"space-y-6"},Me={class:"grid grid-cols-2 gap-4 sm:grid-cols-4"},Ue=["value"],Ve=["value"],Fe=["value"],Le=["value"],Se={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},Te={class:"block text-sm font-medium text-gray-700"},Be=["onUpdate:modelValue"],Pe=["value"],Re={class:"space-y-4"},$e={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3"},je={class:"block text-sm font-medium text-gray-700"},ze=["value","onInput","onBlur"],Ge={class:"space-y-6"},He={class:"mb-3 text-sm font-semibold text-brand-700"},Xe={class:"grid grid-cols-1 gap-3 sm:grid-cols-2 lg:grid-cols-3"},qe={class:"block text-sm font-medium text-gray-700"},Ze=["value","onInput","onBlur"],Je={class:"flex items-center gap-3 border-t border-gray-200 pt-6"},Ke=["disabled"],Qe={key:0,class:"h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},We=["disabled"],Ye={key:0,class:"h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},eo={key:0,class:"text-sm text-gray-400"},ao={__name:"Edit",props:{avaliacao:Object,ifp:Object,profiler:Object,ancoras:Array,forcas:Array,niveis:Array,ancoraTipos:Array,virtudes:Array},setup(E){const d=E,f=d.avaliacao,_=M("geral"),$=[{key:"geral",label:"Geral"},{key:"ifp",label:"IFP"},{key:"profiler",label:"Profiler"},{key:"ancoras",label:"Âncoras"},{key:"forcas",label:"Forças Pessoais"}];function n(r,e,t){return r?r[e]??r[t]??null:null}function m(r){if(r==null||r==="")return null;const e=parseFloat(r);return isNaN(e)?null:e.toFixed(2).replace(".",",")}function j(r){const e=d.ancoras?.find(t=>(t.ANCORA_TIPO_ID??t.ancora_tipo_id)==r);return e?m(e.VALOR??e.valor):null}function z(r){const e=d.forcas?.find(t=>(t.FORCA_ID??t.forca_id)==r);return e?m(e.VALOR??e.valor):null}const a=Z({numemp:n(f,"NUMEMP","numemp")||"",tipcol:n(f,"TIPCOL","tipcol")||"",numcad:n(f,"NUMCAD","numcad")||"",nomfun:n(f,"NOMFUN","nomfun")||"",data_avaliacao:n(f,"DATA_AVALIACAO","data_avaliacao")?String(n(f,"DATA_AVALIACAO","data_avaliacao")).substring(0,10):"",observacao:n(f,"OBSERVACAO","observacao")||"",status:"RASCUNHO",ifp:{assistencia:m(n(d.ifp,"ASSISTENCIA","assistencia")),intracepcao:m(n(d.ifp,"INTRACEPCAO","intracepcao")),afago:m(n(d.ifp,"AFAGO","afago")),autonomia:m(n(d.ifp,"AUTONOMIA","autonomia")),deferencia:m(n(d.ifp,"DEFERENCIA","deferencia")),afiliacao:m(n(d.ifp,"AFILIACAO","afiliacao")),dominancia:m(n(d.ifp,"DOMINANCIA","dominancia")),desempenho:m(n(d.ifp,"DESEMPENHO","desempenho")),exibicao:m(n(d.ifp,"EXIBICAO","exibicao")),agressao:m(n(d.ifp,"AGRESSAO","agressao")),ordem:m(n(d.ifp,"ORDEM","ordem")),persistencia:m(n(d.ifp,"PERSISTENCIA","persistencia")),mudanca:m(n(d.ifp,"MUDANCA","mudanca"))},profiler:{executor:m(n(d.profiler,"EXECUTOR","executor")),planejador:m(n(d.profiler,"PLANEJADOR","planejador")),analista:m(n(d.profiler,"ANALISTA","analista")),comunicador:m(n(d.profiler,"COMUNICADOR","comunicador")),energia_nivel_id:n(d.profiler,"ENERGIA_NIVEL_ID","energia_nivel_id")??null,exigencia_meio_nivel_id:n(d.profiler,"EXIGENCIA_MEIO_NIVEL_ID","exigencia_meio_nivel_id")??null,aproveitamento_nivel_id:n(d.profiler,"APROVEITAMENTO_NIVEL_ID","aproveitamento_nivel_id")??null,moral_nivel_id:n(d.profiler,"MORAL_NIVEL_ID","moral_nivel_id")??null,positividade_nivel_id:n(d.profiler,"POSITIVIDADE_NIVEL_ID","positividade_nivel_id")??null,flexibilidade_nivel_id:n(d.profiler,"FLEXIBILIDADE_NIVEL_ID","flexibilidade_nivel_id")??null,amplitude_nivel_id:n(d.profiler,"AMPLITUDE_NIVEL_ID","amplitude_nivel_id")??null,automotivacao_nivel_id:n(d.profiler,"AUTOMOTIVACAO_NIVEL_ID","automotivacao_nivel_id")??null,incitabilidade_nivel_id:n(d.profiler,"INCITABILIDADE_NIVEL_ID","incitabilidade_nivel_id")??null},ancoras:(d.ancoraTipos||[]).map(r=>({tipo_id:r.ID??r.id,valor:j(r.ID??r.id)})),forcas:(d.virtudes||[]).flatMap(r=>(r.forcas||[]).map(e=>({forca_id:e.ID??e.id,valor:z(e.ID??e.id)})))});function N(r){if(r==null||r==="")return null;const e=String(r).replace(",","."),t=parseFloat(e);return isNaN(t)?null:t}function y(r,e,t){let i=t.target.value.replace(/\D/g,"");i=i.replace(/^0+/,"")||"0";let s=parseInt(i,10);s>1e4&&(s=1e4);const D=(s/100).toFixed(2).replace(".",",");r[e]=D,t.target.value=D}function I(r,e,t){const i=r[e];if(i==null||i==="")return;let s=N(i);if(s===null){r[e]="0,00",t.target.value="0,00";return}s<0&&(s=0),s>100&&(s=100);const D=s.toFixed(2).replace(".",",");r[e]=D,t.target.value=D}function S(r){for(const e of Object.keys(a.ifp))a.ifp[e]=N(a.ifp[e]);for(const e of["executor","planejador","analista","comunicador"])a.profiler[e]=N(a.profiler[e]);for(const e of a.ancoras)e.valor=N(e.valor);for(const e of a.forcas)e.valor=N(e.valor);a.status=r,a.put(route("avaliacoes.update",n(f,"ID","id")))}const G={assistencia:"Assistencia",intracepcao:"Intracepcao",afago:"Afago",autonomia:"Autonomia",deferencia:"Deferencia",afiliacao:"Afiliacao",dominancia:"Dominancia",desempenho:"Desempenho",exibicao:"Exibicao",agressao:"Agressao",ordem:"Ordem",persistencia:"Persistencia",mudanca:"Mudanca"},H={energia_nivel_id:"Energia",exigencia_meio_nivel_id:"Exigencia do Meio",aproveitamento_nivel_id:"Aproveitamento",moral_nivel_id:"Moral",positividade_nivel_id:"Positividade",flexibilidade_nivel_id:"Flexibilidade",amplitude_nivel_id:"Amplitude",automotivacao_nivel_id:"Automotivacao",incitabilidade_nivel_id:"Incitabilidade"};function V(r){return a.forcas.findIndex(e=>e.forca_id===r)}const A=M(n(f,"NUMCAD","numcad")&&n(f,"NOMFUN","nomfun")?`${n(f,"NUMCAD","numcad")} - ${n(f,"NOMFUN","nomfun")}`:""),O=M([]),F=M(!1);let T=null;const w=Y(()=>!a.numcad||!a.nomfun?"":`${a.numcad} - ${a.nomfun}`);function h(){O.value=[]}function B(){a.numemp="",a.tipcol="",a.numcad="",a.nomfun=""}function X(r){const e=r.NUMEMP??r.numemp??"",t=r.TIPCOL??r.tipcol??"",i=r.NUMCAD??r.numcad??"",s=(r.NOMFUN??r.nomfun??"").toString().toUpperCase();a.numemp=e,a.tipcol=t,a.numcad=i,a.nomfun=s,A.value=`${i} - ${s}`,h()}function q(){clearTimeout(T),A.value=(A.value||"").toUpperCase();const r=A.value.trim();if(!r){B(),h();return}if(w.value&&r!==w.value&&B(),r.length<2&&!/^\d+$/.test(r)){h();return}T=setTimeout(async()=>{F.value=!0;try{const e=route("colaboradores.index")+`?q=${encodeURIComponent(r)}`,t=await fetch(e,{headers:{Accept:"application/json"}});if(!t.ok){h();return}O.value=await t.json()}finally{F.value=!1}},250)}return(r,e)=>(c(),u(b,null,[L(l(J),{title:`Editar Avaliacao #${n(l(f),"ID","id")}`},null,8,["title"]),L(ee,null,{default:P(()=>[o("div",oe,[o("div",te,[o("div",ae,[e[37]||(e[37]=o("div",{class:"h-1.5 bg-gradient-to-r from-brand-600 via-brand-500 to-brand-700"},null,-1)),o("div",le,[o("div",re,[o("div",null,[o("h2",ne," Editar Avaliacao #"+p(n(l(f),"ID","id")),1),o("p",ie,p(n(l(f),"NOMFUN","nomfun"))+" — Matricula "+p(n(l(f),"NUMCAD","numcad")),1)]),o("div",se,[e[18]||(e[18]=o("span",{class:"inline-flex rounded-full bg-amber-50 px-3 py-1 text-xs font-semibold text-amber-700 ring-1 ring-amber-600/20"}," RASCUNHO ",-1)),L(l(K),{href:r.route("avaliacoes.show",n(l(f),"ID","id")),class:"inline-flex items-center gap-1.5 rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50 transition"},{default:P(()=>[...e[17]||(e[17]=[o("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})],-1),U(" Voltar ",-1)])]),_:1},8,["href"])])]),o("form",{onSubmit:e[16]||(e[16]=Q(()=>{},["prevent"])),class:"space-y-6"},[o("div",de,[o("nav",ue,[(c(),u(b,null,x($,t=>o("button",{key:t.key,type:"button",onClick:i=>_.value=t.key,class:R(["rounded-t-lg px-4 py-2.5 text-sm font-semibold transition",_.value===t.key?"border-b-2 border-brand-600 text-brand-600 bg-brand-50/50":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"])},p(t.label),11,ce)),64))])]),v(o("div",me,[o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700"},"Colaborador",-1)),o("div",pe,[v(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>A.value=t),onInput:q,onBlur:e[1]||(e[1]=()=>r.setTimeout(h,150)),type:"text",class:"w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500 uppercase",placeholder:"Digite matricula ou nome...",autocomplete:"off",spellcheck:"false"},null,544),[[C,A.value]]),F.value?(c(),u("div",fe,"Buscando...")):g("",!0),O.value.length?(c(),u("div",ve,[(c(!0),u(b,null,x(O.value,t=>(c(),u("button",{key:t.NUMCAD??t.numcad,type:"button",class:"block w-full px-4 py-2.5 text-left text-sm hover:bg-brand-50 transition-colors",onClick:i=>X(t)},[o("span",be,p(t.NUMCAD??t.numcad),1),o("span",xe," — "+p(t.NOMFUN??t.nomfun),1)],8,ge))),128))])):g("",!0)]),l(a).errors.numcad?(c(),u("div",_e,p(l(a).errors.numcad),1)):g("",!0),l(a).errors.nomfun?(c(),u("div",ye,p(l(a).errors.nomfun),1)):g("",!0),v(o("input",{type:"hidden","onUpdate:modelValue":e[2]||(e[2]=t=>l(a).numcad=t)},null,512),[[C,l(a).numcad]]),v(o("input",{type:"hidden","onUpdate:modelValue":e[3]||(e[3]=t=>l(a).nomfun=t)},null,512),[[C,l(a).nomfun]]),w.value?(c(),u("div",Ie,[e[19]||(e[19]=o("svg",{class:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24","stroke-width":"2",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"})],-1)),U(" "+p(w.value),1)])):g("",!0)]),o("div",Ae,[o("div",null,[e[21]||(e[21]=o("label",{class:"block text-sm font-medium text-gray-700"},"Data da Avaliacao",-1)),v(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).data_avaliacao=t),type:"date",class:"mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500"},null,512),[[C,l(a).data_avaliacao]]),l(a).errors.data_avaliacao?(c(),u("div",Ne,p(l(a).errors.data_avaliacao),1)):g("",!0)])]),o("div",null,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700"},"Observacao",-1)),v(o("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>l(a).observacao=t),rows:"3",class:"mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"Opcional"},null,512),[[C,l(a).observacao]]),l(a).errors.observacao?(c(),u("div",he,p(l(a).errors.observacao),1)):g("",!0)])],512),[[k,_.value==="geral"]]),v(o("div",De,[e[23]||(e[23]=o("p",{class:"text-sm text-gray-500"}," Preencha os valores do Inventario Fatorial de Personalidade (IFP). ",-1)),o("div",Ce,[(c(),u(b,null,x(G,(t,i)=>o("div",{key:i},[o("label",ke,p(t),1),o("input",{value:l(a).ifp[i],onInput:s=>y(l(a).ifp,i,s),onBlur:s=>I(l(a).ifp,i,s),type:"text",inputmode:"decimal",class:"mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0,00 %"},null,40,Ee),l(a).errors[`ifp.${i}`]?(c(),u("div",Oe,p(l(a).errors[`ifp.${i}`]),1)):g("",!0)])),64))])],512),[[k,_.value==="ifp"]]),v(o("div",we,[o("div",null,[e[28]||(e[28]=o("h3",{class:"mb-3 text-sm font-semibold text-gray-800"},"Perfis (%)",-1)),o("div",Me,[o("div",null,[e[24]||(e[24]=o("label",{class:"block text-sm font-medium text-gray-700"},"Executor",-1)),o("input",{value:l(a).profiler.executor,onInput:e[6]||(e[6]=t=>y(l(a).profiler,"executor",t)),onBlur:e[7]||(e[7]=t=>I(l(a).profiler,"executor",t)),type:"text",inputmode:"decimal",class:"mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0,00 %"},null,40,Ue)]),o("div",null,[e[25]||(e[25]=o("label",{class:"block text-sm font-medium text-gray-700"},"Planejador",-1)),o("input",{value:l(a).profiler.planejador,onInput:e[8]||(e[8]=t=>y(l(a).profiler,"planejador",t)),onBlur:e[9]||(e[9]=t=>I(l(a).profiler,"planejador",t)),type:"text",inputmode:"decimal",class:"mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0,00 %"},null,40,Ve)]),o("div",null,[e[26]||(e[26]=o("label",{class:"block text-sm font-medium text-gray-700"},"Analista",-1)),o("input",{value:l(a).profiler.analista,onInput:e[10]||(e[10]=t=>y(l(a).profiler,"analista",t)),onBlur:e[11]||(e[11]=t=>I(l(a).profiler,"analista",t)),type:"text",inputmode:"decimal",class:"mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0,00 %"},null,40,Fe)]),o("div",null,[e[27]||(e[27]=o("label",{class:"block text-sm font-medium text-gray-700"},"Comunicador",-1)),o("input",{value:l(a).profiler.comunicador,onInput:e[12]||(e[12]=t=>y(l(a).profiler,"comunicador",t)),onBlur:e[13]||(e[13]=t=>I(l(a).profiler,"comunicador",t)),type:"text",inputmode:"decimal",class:"mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0,00 %"},null,40,Le)])])]),o("div",null,[e[30]||(e[30]=o("h3",{class:"mb-3 text-sm font-semibold text-gray-800"},"Indicadores de Nivel",-1)),o("div",Se,[(c(),u(b,null,x(H,(t,i)=>o("div",{key:i},[o("label",Te,p(t),1),v(o("select",{"onUpdate:modelValue":s=>l(a).profiler[i]=s,class:R(["mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500",l(a).profiler[i]===null?"text-gray-400":"text-gray-900"])},[e[29]||(e[29]=o("option",{value:null,class:"text-gray-400"},"Selecione...",-1)),(c(!0),u(b,null,x(E.niveis,s=>(c(),u("option",{key:s.ID??s.id,value:s.ID??s.id,class:"text-gray-900"},p(s.DESCRICAO??s.descricao),9,Pe))),128))],10,Be),[[W,l(a).profiler[i]]])])),64))])])],512),[[k,_.value==="profiler"]]),v(o("div",Re,[e[31]||(e[31]=o("p",{class:"text-sm text-gray-500"}," Preencha o valor para cada ancora de carreira. ",-1)),o("div",$e,[(c(!0),u(b,null,x(E.ancoraTipos,(t,i)=>(c(),u("div",{key:t.ID??t.id},[o("label",je,p(t.NOME??t.nome),1),o("input",{value:l(a).ancoras[i].valor,onInput:s=>y(l(a).ancoras[i],"valor",s),onBlur:s=>I(l(a).ancoras[i],"valor",s),type:"text",inputmode:"decimal",class:"mt-1 w-full rounded-lg border-gray-300 shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0,00 %"},null,40,ze)]))),128))])],512),[[k,_.value==="ancoras"]]),v(o("div",Ge,[e[32]||(e[32]=o("p",{class:"text-sm text-gray-500"}," Preencha o valor para cada forca pessoal, agrupadas por virtude. ",-1)),(c(!0),u(b,null,x(E.virtudes,t=>(c(),u("div",{key:t.ID??t.id,class:"rounded-lg border border-gray-200 p-4"},[o("h3",He,p(t.NOME??t.nome),1),o("div",Xe,[(c(!0),u(b,null,x(t.forcas,i=>(c(),u("div",{key:i.ID??i.id},[o("label",qe,p(i.NOME??i.nome),1),o("input",{value:l(a).forcas[V(i.ID??i.id)]?.valor,onInput:s=>y(l(a).forcas[V(i.ID??i.id)],"valor",s),onBlur:s=>I(l(a).forcas[V(i.ID??i.id)],"valor",s),type:"text",inputmode:"decimal",class:"mt-1 w-full rounded-lg border-gray-300 text-sm shadow-sm focus:border-brand-500 focus:ring-brand-500",placeholder:"0,00 %"},null,40,Ze)]))),128))])]))),128))],512),[[k,_.value==="forcas"]]),o("div",Je,[o("button",{type:"button",onClick:e[14]||(e[14]=t=>S("RASCUNHO")),disabled:l(a).processing||!l(a).numcad||!l(a).nomfun,class:"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-5 py-2.5 text-sm font-semibold text-gray-700 shadow-sm hover:bg-gray-50 disabled:opacity-50 transition"},[l(a).processing&&l(a).status==="RASCUNHO"?(c(),u("svg",Qe,[...e[33]||(e[33]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):g("",!0),e[34]||(e[34]=U(" Salvar Rascunho ",-1))],8,Ke),o("button",{type:"button",onClick:e[15]||(e[15]=t=>S("FINALIZADA")),disabled:l(a).processing||!l(a).numcad||!l(a).nomfun,class:"inline-flex items-center gap-2 rounded-lg bg-brand-600 px-5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-brand-700 disabled:opacity-50 transition"},[l(a).processing&&l(a).status==="FINALIZADA"?(c(),u("svg",Ye,[...e[35]||(e[35]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)])])):g("",!0),e[36]||(e[36]=U(" Finalizar Avaliacao ",-1))],8,We),!l(a).numcad||!l(a).nomfun?(c(),u("span",eo," Selecione um colaborador para habilitar. ")):g("",!0)])],32)])])])])]),_:1})],64))}};export{ao as default};
